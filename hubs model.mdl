{UTF-8}
********************************************************
	.hubs model
********************************************************~
		This model allows to simulate the dynamics of a logistics system where \
		hubs are added over time based on funds. The model works with a goal \
		number of hubs as a driving force. The model works with integer (this \
		means that a certain number of funds are needed to construct one hub and \
		so on). This means that it is hard to reach a specific goal, and it is \
		reached only if the system allows. By changing the average hub usage time \
		and the average hub construction time, one can find a solution that allows \
		reaching the goal number of hubs.
	|

adding funds=
	MAXIMUM FUNDS PER YEAR*EFFECT OF GAP ON ADDING FUNDS
	~	k$/Year
	~	Flow of adding funds into the "Funds" stock. This flow is calculated using \
		the effect of gap on adding funds variable, multiplied by the maximum \
		funds per year.
	|

EFFECT OF NUMBER OF HUBS ON CO2 EMISSIONS PER TON KM = WITH LOOKUP (
	Logistics Hubs,
		([(0,0)-(100,1)],(0,1),(1,0.957895),(4,0.900877),(7,0.85614),(10,0.83),(30,0.75),(50\
		,0.7),(100,0.65) ))
	~	Dmnl
	~	The number of hubs reduces the CO2 emissions based on a graph function. \
		Now the function is limited to a maximum number of hubs of 100
	|

annual CO2 emissions=
	CO2 emissions per ton km*ton km travelled
	~	tonCO2eq/Year
	~		|

annual CO2 emissions gap=
	(annual CO2 emissions-ANNUAL CO2 EMISSIONS GOAL)/ANNUAL CO2 EMISSIONS GOAL
	~	Dmnl
	~		|

ANNUAL CO2 EMISSIONS GOAL=
	2
	~	tonCO2eq/Year [1,20,0.1]
	~		|

INITIAL CO2 EMISSIONS PER TON KM=
	2
	~	tonCO2eq/tonkm
	~		|

INITIAL TON KM TRAVELLED=
	2
	~	tonkm/Year
	~		|

CO2 emissions per ton km=
	EFFECT OF NUMBER OF HUBS ON CO2 EMISSIONS PER TON KM*INITIAL CO2 EMISSIONS PER TON KM
	~	tonCO2eq/tonkm
	~		|

EFFECT OF NUMBER OF HUBS ON TON KM TRAVELLED = WITH LOOKUP (
	Logistics Hubs,
		([(0,0)-(100,1)],(0,1),(1,0.957895),(4,0.900877),(7,0.85614),(10,0.83),(30,0.75),(50\
		,0.7),(100,0.65) ))
	~	Dmnl
	~		|

ton km travelled=
	EFFECT OF NUMBER OF HUBS ON TON KM TRAVELLED*INITIAL TON KM TRAVELLED
	~	tonkm/Year
	~		|

dismissing hubs=
	Logistics Hubs/AVERAGE HUB USAGE TIME
	~	Hub/Year
	~	Number of hubs that are dismissed, per year. The number is defined based \
		on the total number of hubs, devided by the average usage time of hubs. No \
		higher order delay is considered is here.
	|

EFFECT OF GAP ON ADDING FUNDS = WITH LOOKUP (
	annual CO2 emissions gap,
		([(0,0)-(1,1)],(0,0),(1e-05,0.5),(0.5,0.9),(0.75,0.98),(1,1) ))
	~	Dmnl
	~	This variable is a lookup (graphical lookup). It represents the effect of \
		the variable "gap in number of hubs" on the flow "adding funds". The shape \
		of the curve is done in a way that a null gap would mean no added funds, \
		and a very small gap produces an effect of adding about half of the \
		maximum funds available. When the gap is higher, the funds added are \
		almost at their maximum value.
	|

MAXIMUM FUNDS PER YEAR=
	2000
	~	k$/Year [500,50000,500]
	~	This is the maximum k$ per year that can be added to the funds for \
		logistics hubs.
	|

adding hubs=
	Funds/COST PER HUB/TIME STEP
	~	Hub/Year
	~	Depending on the funds, this flows determins the number of hubs that are \
		added to the Hubs in Construction stock. The need for a division by a time \
		step comes from the unit check.
	|

AVERAGE HUB CONSTRUCTION TIME=
	2
	~	Year [0.5,5,0.25]
	~	Average construction time for the hubs, from when it is decided to build \
		the hubs with the funds till when they are ready to use.
	|

AVERAGE HUB USAGE TIME=
	10
	~	Year [5,50,1]
	~	Average time of usage of the hubs, from when they are completed to when \
		they are dismissed.
	|

completing hubs=
	Hubs in Construction/AVERAGE HUB CONSTRUCTION TIME
	~	Hub/Year
	~	Number of hubs that are completed, per year. Depends on the number of hubs \
		that are in construction devided by the average construction time.
	|

COST PER HUB=
	500
	~	k$/Hub [500,5000,500]
	~	This constant represents the average cost per logistic hub.
	|

Funds= INTEG (
	adding funds-using funds,
		0)
	~	k$
	~	Accumulation of funds available for the construction of hubs. Starts from \
		0.
	|

Hubs in Construction= INTEG (
	adding hubs-completing hubs,
		0)
	~	Hub
	~	Hubs under construction. Starts from 0.
	|

Logistics Hubs= INTEG (
	completing hubs-dismissing hubs,
		0)
	~	Hub
	~	Active logistics hubs. Starts from 0.
	|

using funds=
	adding hubs*COST PER HUB
	~	k$/Year
	~	This is the outflow of the stock of funds. It is calculated using the \
		co-flow adding funds: based on the number of hubs added to the system, a \
		number of k$ are used per year.
	|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 100
	~	Year
	~	The final time for the simulation.
	|

INITIAL TIME  = 0
	~	Year
	~	The initial time for the simulation.
	|

SAVEPER  = 1
	~	Year [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 1
	~	Year [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*Hubs and funds
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|255-255-255|96,96,100,0
10,1,Logistics Hubs,673,108,40,20,3,3,0,0,0,0,0,0,0,0,0,0,0,0
10,2,Funds,329,401,40,20,3,3,0,0,0,0,0,0,0,0,0,0,0,0
12,3,48,124,403,12,8,0,3,0,0,-1,0,0,0,0,0,0,0,0,0
1,4,6,2,4,0,0,22,0,0,0,-1--1--1,,1|(253,403)|
1,5,6,3,100,0,0,22,0,0,0,-1--1--1,,1|(167,403)|
11,6,48,209,403,8,8,34,3,0,0,1,0,0,0,0,0,0,0,0,0
10,7,adding funds,209,428,40,11,40,3,0,0,-1,0,0,0,0,0,0,0,0,0
12,8,48,875,112,12,8,0,3,0,0,-1,0,0,0,0,0,0,0,0,0
1,9,11,8,4,0,0,22,0,0,0,-1--1--1,,1|(832,112)|
1,10,11,1,100,0,0,22,0,0,0,-1--1--1,,1|(748,112)|
11,11,48,788,112,8,8,34,3,0,0,1,0,0,0,0,0,0,0,0,0
10,12,dismissing hubs,788,127,48,11,40,3,0,0,-1,0,0,0,0,0,0,0,0,0
12,13,48,531,408,12,8,0,3,0,0,-1,0,0,0,0,0,0,0,0,0
1,14,16,13,4,0,0,22,0,0,0,-1--1--1,,1|(484,408)|
1,15,16,2,100,0,0,22,0,0,0,-1--1--1,,1|(400,408)|
11,16,48,436,408,8,8,34,3,0,0,1,0,0,0,0,0,0,0,0,0
10,17,using funds,436,421,35,11,40,3,0,0,-1,0,0,0,0,0,0,0,0,0
10,18,AVERAGE HUB USAGE TIME,880,216,57,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,19,AVERAGE HUB CONSTRUCTION TIME,612,208,65,28,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,20,COST PER HUB,465,261,57,11,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,21,Hubs in Construction,413,112,44,20,3,131,0,0,0,0,0,0,0,0,0,0,0,0
1,22,24,1,4,0,0,22,0,0,0,-1--1--1,,1|(592,112)|
1,23,24,21,100,0,0,22,0,0,0,-1--1--1,,1|(496,112)|
11,24,530,540,112,8,8,34,3,0,0,1,0,0,0,0,0,0,0,0,0
10,25,completing hubs,540,127,51,11,40,3,0,0,-1,0,0,0,0,0,0,0,0,0
12,26,48,216,116,12,8,0,3,0,0,-1,0,0,0,0,0,0,0,0,0
1,27,29,21,4,0,0,22,0,0,0,-1--1--1,,1|(337,116)|
1,28,29,26,100,0,0,22,0,0,0,-1--1--1,,1|(257,116)|
11,29,48,297,116,8,8,34,3,0,0,1,0,0,0,0,0,0,0,0,0
10,30,adding hubs,297,129,40,11,40,3,0,0,-1,0,0,0,0,0,0,0,0,0
1,31,20,30,1,0,0,0,0,64,0,-1--1--1,,1|(404,175)|
1,32,2,30,1,0,0,0,0,64,0,-1--1--1,,1|(223,252)|
1,33,19,25,0,0,0,0,0,64,0,-1--1--1,,1|(573,164)|
1,34,21,25,1,0,0,0,0,64,0,-1--1--1,,1|(491,168)|
1,35,18,12,0,0,0,0,0,64,0,-1--1--1,,1|(835,172)|
1,36,1,12,1,0,0,0,0,64,0,-1--1--1,,1|(733,176)|
10,37,TIME STEP,227,29,52,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128,0,0,0,0,0,0
1,38,37,30,0,0,0,0,0,64,0,-1--1--1,,1|(257,73)|
1,39,30,16,1,0,0,0,0,64,0,-1--1--1,,1|(300,269)|
1,40,20,16,1,0,0,0,0,64,0,-1--1--1,,1|(479,348)|
10,41,MAXIMUM FUNDS PER YEAR,112,511,68,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,42,EFFECT OF GAP ON ADDING FUNDS,403,553,76,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
1,43,42,7,1,0,0,0,0,64,0,-1--1--1,,1|(276,512)|
1,44,41,7,0,0,0,0,0,64,0,-1--1--1,,1|(159,472)|
12,45,0,1253,91,152,152,3,44,0,0,1,0,0,0,0,0,0,0,0,0
Funds
12,46,0,1253,397,152,152,3,44,0,0,1,0,0,0,0,0,0,0,0,0
Hubs
10,47,annual CO2 emissions gap,712,521,56,19,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|0||128-128-128,0,0,0,0,0,0
1,48,47,42,1,0,0,0,0,64,0,-1--1--1,,1|(572,569)|
\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*co2 emissions
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|255-255-255|96,96,100,0
10,1,CO2 emissions per ton km,329,259,61,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,2,ton km travelled,503,283,51,11,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,7,ANNUAL CO2 EMISSIONS GOAL,771,212,71,31,8,131,0,0,0,0,0,0,0,0,0,0,0,0
10,8,annual CO2 emissions gap,631,112,49,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
1,9,7,8,0,0,0,0,0,64,0,-1--1--1,,1|(700,160)|
10,11,EFFECT OF NUMBER OF HUBS ON CO2 EMISSIONS PER TON KM,136,359,101,28,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,12,EFFECT OF NUMBER OF HUBS ON TON KM TRAVELLED,525,408,93,28,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,13,Logistics Hubs,300,451,56,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|0||128-128-128,0,0,0,0,0,0
10,14,INITIAL CO2 EMISSIONS PER TON KM,149,244,61,28,8,3,0,0,0,0,0,0,0,0,0,0,0,0
10,15,INITIAL TON KM TRAVELLED,651,340,65,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
1,16,14,1,0,0,0,0,0,64,0,-1--1--1,,1|(232,249)|
1,17,11,1,0,0,0,0,0,64,0,-1--1--1,,1|(236,307)|
1,19,12,2,0,0,0,0,0,64,0,-1--1--1,,1|(513,344)|
1,20,15,2,0,0,0,0,0,64,0,-1--1--1,,1|(572,308)|
1,22,13,11,1,0,0,0,0,64,0,-1--1--1,,1|(157,455)|
1,23,13,12,1,0,0,0,0,64,0,-1--1--1,,1|(393,524)|
10,24,annual CO2 emissions,460,163,39,19,8,3,0,0,0,0,0,0,0,0,0,0,0,0
1,25,1,24,0,0,0,0,0,64,0,-1--1--1,,1|(387,215)|
1,26,2,24,0,0,0,0,0,64,0,-1--1--1,,1|(484,233)|
1,27,24,8,0,0,0,0,0,64,0,-1--1--1,,1|(532,141)|
\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*Output graphs
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|255-255-255|96,96,100,0
12,1,0,240,169,152,152,3,44,0,0,1,0,0,0,0,0,0,0,0,0
Funds
12,2,0,548,168,152,152,3,44,0,0,1,0,0,0,0,0,0,0,0,0
Hubs
12,3,0,996,169,285,152,3,188,0,0,1,0,0,0,0,0,0,0,0,0
co2
12,4,0,795,357,80,20,3,124,0,0,0,0,0,0,0,0,0,0,0,0
ANNUAL CO2 EMISSIONS GOAL,100,1000,10
12,5,0,791,428,80,20,3,124,0,0,0,0,0,0,0,0,0,0,0,0
INITIAL CO2 EMISSIONS PER TON KM,0,5,0.1
12,6,0,793,503,80,20,3,124,0,0,0,0,0,0,0,0,0,0,0,0
INITIAL TON KM TRAVELLED,0,5,0.1
12,7,0,488,364,80,20,3,124,0,0,0,0,0,0,0,0,0,0,0,0
AVERAGE HUB USAGE TIME,5,50,1
12,8,0,172,363,80,20,3,124,0,0,0,0,0,0,0,0,0,0,0,0
MAXIMUM FUNDS PER YEAR,500,50000,500
///---\\\
:GRAPH Hubs
:TITLE Hubs
:SCALE
:VAR Logistics Hubs
:VAR Hubs in Construction

:GRAPH Funds
:TITLE Funds
:SCALE
:VAR adding funds
:VAR MAXIMUM FUNDS PER YEAR
:SCALE
:VAR Funds

:GRAPH co2
:TITLE CO2 Emissions
:SCALE
:VAR annual CO2 emissions
:VAR ANNUAL CO2 EMISSIONS GOAL
:L<%^E!@
1:CO2EMISSIONS.vdfx
1:Current_3.vdfx
1:Current_2.vdfx
1:Current.vdfx
4:Time
5:annual CO2 emissions gap
9:CO2EMISSIONS
19:100,2
24:0
25:100
26:100
23:0
15:0,0,0,0,0,0
27:0,
34:0,
42:1
72:0
73:0
35:Date
36:YYYY-MM-DD
37:2000
38:1
39:1
40:0
41:0
95:0
96:0
77:0
78:0
93:0
94:0
92:0
91:0
90:0
87:0
75:
43:
